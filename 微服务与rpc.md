# 微服务



## Rpc


#### Rpc简介

##### 远程过程调用需要解决的问题

+ 函数指针不通用：建立callID映射

+ 不能通过内存传递参数，甚至双方语言不一样：序列化与反序列化协议

+ 如何跨进程传递：制定基于http，tcp，udp的传输协议

##### rpc流程

+ 服务消费方(client)调用以本地调用方式调用服务

+ client stub接收到调用后负责将方法、参数等组装成能够进行网络传输的消息体

+ client stub找到服务地址，并将消息发送到服务端

+ server stub收到消息后进行解码

+ server stub根据解码结果调用本地的服务

+ 本地服务执行并将结果返回给server stub

+ server stub将返回结果打包成消息并发送至消费方

+ client stub接收到消息，并进行解码

+ 服务消费方得到最终结果

2-8是一个rpc框架应该去封装的，使得rpc和本地函数调用一样简单


#### Rpc框架：Thrift

##### IDL代码生成

thrift编译器读取idl文件生成对应语言的文件

##### 序列化

文本协议与二进制协议

+ Binary

+ Json

##### 通讯协议

+ 其实上面的Binary既包含了序列化的实现，也包含了通讯协议的实现


#### 字节开源rpc框架KiteX











## 网关
